import{r as c,j as e,b as D,g as T,d as n,W as $,T as R,L as S,k as g,E as A,H as I,J as U,K as v,M as B,B as i}from"./index-D5iIMIKd.js";import{a as p,U as m}from"./PortConfig-CL2sLOPV.js";import{Z as E}from"./Zoom-Cv-dUA3Y.js";const G=c.forwardRef(function(o,d){return e.jsx(E,{ref:d,...o})}),l=3e3,H=()=>{const x=D(s=>s.persistData.user.userInfo),[o,d]=c.useState([]),[r,f]=c.useState({}),j=T(),[y,u]=c.useState(!1),h=()=>{u(!1)},C=async()=>{var s;try{const t=await p.get(`${m}api/listing/${x.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(t.data.succeess===!1){console.log(t.data.message),i.error((s=t==null?void 0:t.data)==null?void 0:s.message,{autoClose:l});return}d(t.data)}catch(t){i.error(t.message,{autoClose:l})}},w=async s=>{var t;try{const a=await p.delete(`${m}api/listing/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(a.data.success==!1){console.log(a.data.message),i.error((t=a==null?void 0:a.data)==null?void 0:t.message,{autoClose:l});return}i.error("Listing Deleted",{autoClose:l}),d(b=>[...b.filter(k=>k._id!==s)])}catch(a){console.log(a.message),i.error(a.message,{autoClose:l})}},L=s=>{j(`/listing/update/${s}`)};return c.useEffect(()=>{C()},[]),e.jsxs(n,{children:[e.jsxs("h2",{style:{color:"green"},children:["Your Listings(",o.length,")"]}),e.jsx(n,{sx:{display:"flex",justifyContent:"space-around",flexWrap:"wrap",rowGap:3},children:o.length>0&&o.map((s,t)=>e.jsxs(n,{sx:{maxWidth:400,width:400,heigth:400,display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",padding:2,backgroundColor:$,borderRadius:3,gap:1.5,flexWrap:{xs:"wrap",sm:"nowrap"}},children:[e.jsxs(n,{sx:{width:250,height:250},children:[e.jsx(R,{variant:"body1",mb:1,children:s.name}),e.jsx(S,{style:{padding:0,margin:0},to:`/listing/${s._id}`,children:e.jsx("img",{className:"cardImage",srcSet:s.imageURLs[0],alt:s.name,width:"250px",height:"200px",style:{objectPosition:"center",objectFit:"fill",borderRadius:"5px"}})})]}),e.jsxs(n,{sx:{display:"flex",flexDirection:{xs:"row",sm:"column"},columnGap:{xs:2,sm:0},rowGap:{xs:0,sm:2},mt:1},children:[e.jsx(g,{onClick:()=>{u(!0),f({id:s._id,name:s.name})},color:"error",type:"button",variant:"contained",children:"Delete"}),e.jsx(g,{onClick:()=>{L(s._id)},color:"primary",type:"button",variant:"contained",children:"Edit"})]})]},t))}),e.jsxs(A,{open:y,TransitionComponent:G,keepMounted:!0,onClose:h,children:[e.jsx(I,{children:"Warning"}),e.jsx(U,{children:e.jsx(v,{children:`Are you sure to delete listing (${r==null?void 0:r.name})?`})}),e.jsxs(B,{children:[e.jsx(g,{onClick:h,children:"Disagree"}),e.jsx(g,{onClick:()=>{w(r==null?void 0:r.id),u(!1)},children:"Agree"})]})]})]})};export{H as default};
