import{r as s,j as e,S as y,T as n,a as c,B as x,w,U as v}from"./index-RV5YIsxB.js";import{S as u}from"./Stack-KQcwQfyK.js";import{T as C}from"./TextField-CP7HvCbv.js";import"./styled-DolKx1nG.js";import"./useFormControl-x1edabWd.js";import"./List-Clvs1NRc.js";const h="+93",I=navigator.userAgent.toLowerCase(),R=({userRef:l,name:m,isSmall:t})=>{const[o,f]=s.useState(null),[r,g]=s.useState(null),[a,p]=s.useState(""),b=/mobile/.test(I);s.useEffect(()=>{(async()=>{try{const i=await w.get(`${v}api/user/userInfo/${l}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});f(i.data)}catch(i){g(i.message||"Failed to load user info")}})()},[l]);const j=d=>{p(d.target.value)};return e.jsx(y,{elevation:3,sx:{p:{xs:3,sm:4},borderRadius:3,maxWidth:700,mx:"auto",bgcolor:"#f5f5f5",boxShadow:"0 8px 24px rgba(0,0,0,0.12)",minHeight:280,display:"flex",flexDirection:"column",justifyContent:r||!o?"center":"flex-start",alignItems:"center",textAlign:"center"},children:r?e.jsx(n,{variant:"h6",color:"error",sx:{fontWeight:"bold",mb:1},children:r}):o?e.jsxs(e.Fragment,{children:[o.mobileNumber&&e.jsxs(u,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{width:"100%",mb:3},children:[e.jsxs(n,{variant:"subtitle1",fontWeight:"600",noWrap:!0,children:["Mobile Number: ",h,"-",o.mobileNumber.slice(1)]}),e.jsx(c,{component:"a",href:`tel:+93${o.mobileNumber.slice(1)}`,variant:"contained",color:"success",size:t?"small":"medium",sx:{whiteSpace:"nowrap"},children:"Call"})]}),e.jsxs(n,{variant:"body1",sx:{mb:3,fontSize:{xs:"1rem",md:"1.15rem"},color:"text.primary",fontWeight:500,width:"100%",textAlign:{xs:"center",sm:"left"}},children:["Contact"," ",e.jsx(x,{component:"span",sx:{fontWeight:"bold",color:"primary.main"},children:o.username})," ","regarding"," ",e.jsx(x,{component:"span",sx:{fontWeight:"bold"},children:m||""}),"."]}),e.jsx(C,{variant:"outlined",multiline:!0,rows:7,placeholder:"Enter your message here...",value:a,onChange:j,fullWidth:!0,size:t?"small":"medium",sx:{mb:4,maxWidth:t?"100%":700,mx:"auto",fontSize:{xs:"0.9rem",md:"1.1rem"},"& .MuiInputBase-root":{fontSize:{xs:"0.9rem",md:"1.1rem"},padding:"14px 16px",minHeight:140,borderRadius:2,backgroundColor:"#fafafa"}}}),e.jsxs(u,{direction:{xs:"column",sm:"row"},spacing:2,width:"100%",justifyContent:{xs:"center",sm:"flex-start"},children:[b&&e.jsx(c,{component:"a",href:`sms:${h}${o.mobileNumber.slice(1)}?&body=${encodeURIComponent(a)}`,variant:"contained",color:"success",fullWidth:t,size:t?"small":"medium",sx:{flexGrow:t?1:0},children:"Send Message via SMS"}),e.jsx(c,{component:"a",href:`mailto:${o.email}?subject=${encodeURIComponent(`Regarding ${m}`)}&body=${encodeURIComponent(a)}`,variant:"contained",color:"success",fullWidth:!t,size:t?"small":"medium",sx:{flexGrow:1},children:"Send Message via E-mail"})]})]}):e.jsx(e.Fragment,{children:e.jsx(n,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"Loading contact info..."})})})};export{R as default};
