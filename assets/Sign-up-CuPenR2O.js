function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/GoogleAuth-BgyfQLnT.js","assets/index-B6Jh5Kqf.js","assets/index-DDnostVl.css","assets/firebase-ZV_pIUqm.js","assets/tslib.es6-8e4HiIxr.js","assets/WaveHeader-BjF8U0ez.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{h as z,j as e,r as n,_ as P,u as B,x as U,y as N,b as M,z as L,N as R,F as w,B as $,I as O,a as G,A as T,T as K,L as _,v as i,C as x,U as f,D as A,E as D,H as Q}from"./index-B6Jh5Kqf.js";import{C as q}from"./Container-Dhm7lGM3.js";import{T as v}from"./TextField-CLAyp7H7.js";import{I as J}from"./InputAdornment-BjTQgN9C.js";import{V as X,a as Y}from"./VisibilityOff-DxW5NHT4.js";import"./styled-lc6bJm8w.js";import"./FormLabel-BWInThNm.js";import"./useFormControl-CrCWuu7o.js";import"./react-is.production.min-DUDD-a5e.js";import"./List-DmmOO-O2.js";const Z=z(e.jsx("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login"),ee=z(e.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),se=n.lazy(()=>P(()=>import("./GoogleAuth-BgyfQLnT.js"),__vite__mapDeps([0,1,2,3,4]))),ae=n.lazy(()=>P(()=>import("./WaveHeader-BjF8U0ez.js"),__vite__mapDeps([5,1,2]))),m=3e3,pe=({url:o})=>{const V=B(),r=U(),d=N(),l=M(V.breakpoints.down("md")),W=L(t=>t.persistData.user.userInfo),c=L(t=>t.locationHistory.locationHistory),[j,u]=n.useState(!1),[a,y]=n.useState({username:"",email:"",password:""}),[g,E]=n.useState(!1),F=()=>E(!g),h=t=>{y(p=>({...p,[t.target.name]:t.target.value}))},H=async t=>{var p,b,I,S,C,k;if(t.preventDefault(),o==="signup"){if(!a.username||!a.email||!a.password){i.error("Please provide credentials",{autoClose:m});return}try{u(!0),await x.post(f+"api/user/signup",a);const s=await x.post(`${f}api/user/signin`,a);localStorage.setItem("accessToken",s.data.accessToken),r(A({...s.data,email:a.email})),i.success("Account created successfully",{autoClose:m}),c?(i.info(`Welcome ${s.data.username}`),r(D(!0)),d(c)):d("/"),y({username:"",email:"",password:""})}catch(s){i.error(((b=(p=s.response)==null?void 0:p.data)==null?void 0:b.message)||s.message,{autoClose:m})}finally{u(!1)}}else{if(!a.email||!a.password){i.error("Please provide credentials",{autoClose:m});return}try{u(!0);const s=await x.post(`${f}api/user/signin`,a);localStorage.setItem("accessToken",s.data.accessToken),r(A({...s.data,email:a.email})),c?(i.info(`Welcome ${s.data.username}`),r(D(!0)),d(c)):d("/")}catch(s){i.error(((S=(I=s.response)==null?void 0:I.data)==null?void 0:S.message)||s.message,{autoClose:m}),r(Q(((k=(C=s.response)==null?void 0:C.data)==null?void 0:k.message)||s.message))}finally{u(!1)}}};return W?e.jsx(R,{to:c||"/"}):e.jsxs(q,{maxWidth:"md",children:[e.jsx(n.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(ae,{title:o==="signup"?"Sign Up":"Sign In"})}),e.jsxs($,{component:"form",onSubmit:H,sx:{mt:5,mx:"auto",width:{xs:"100%",sm:"80%",md:"60%"},display:"flex",flexDirection:"column",gap:3,alignItems:"stretch"},children:[o==="signup"&&e.jsx(v,{label:"Username",name:"username",type:"text",variant:"outlined",size:l?"small":"medium",fullWidth:!0,value:a.username,onChange:h}),e.jsx(v,{label:"Email",name:"email",type:"email",variant:"outlined",size:l?"small":"medium",fullWidth:!0,value:a.email,onChange:h}),e.jsx(v,{label:"Password",name:"password",type:g?"text":"password",variant:"outlined",size:l?"small":"medium",fullWidth:!0,value:a.password,onChange:h,InputProps:{endAdornment:e.jsx(J,{position:"end",children:e.jsx(O,{onClick:F,edge:"end",children:g?e.jsx(X,{}):e.jsx(Y,{})})})}}),e.jsx(G,{type:"submit",variant:"contained",fullWidth:!0,size:l?"small":"medium",startIcon:o==="signin"?e.jsx(Z,{}):e.jsx(ee,{}),sx:{backgroundColor:T,"&:hover":{backgroundColor:T,opacity:.9}},disabled:j,children:j?"Loading...":o==="signin"?"Sign In":"Sign Up"}),e.jsx(n.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(se,{isMobile:l})}),e.jsx(K,{variant:"body2",textAlign:"center",mt:2,children:o==="signup"?e.jsxs(e.Fragment,{children:["Already have an account?"," ",e.jsx(_,{to:"/signin",className:"Link",children:"Sign in"})]}):e.jsxs(e.Fragment,{children:["Don't have an account?"," ",e.jsx(_,{to:"/signup",className:"Link",children:"Create one"})]})})]})]})};export{pe as default};
