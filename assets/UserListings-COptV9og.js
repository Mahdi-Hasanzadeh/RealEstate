import{q as _,r as o,p as $,j as s,F as p,B as D,v as i,a4 as k,Y as v}from"./index-RV5YIsxB.js";import{N as w,d as A,I as F}from"./ItemCard-f_CoiPR6.js";import{C as I}from"./ConfirmDialog-DBTw2uG_.js";import{a as x}from"./axiosConfig-CWlSV8Gi.js";import{C as B}from"./Container-BPfE54Zb.js";import"./Card-D_VzpON0.js";import"./CardMedia-CAhi13jz.js";import"./Zoom-CT9GbHCF.js";import"./styled-DolKx1nG.js";const G=()=>{const g=_(e=>e.persistData.user.userInfo),[n,u]=o.useState([]),[C,l]=o.useState(!0),[t,y]=o.useState({}),[h,m]=o.useState(!1),f=$(),j=()=>{m(!1)},L=()=>{S(t==null?void 0:t.id),m(!1)},N=async()=>{var e;try{l(!0);const a=await x.get(`api/listing/${g.id}`);if(a.data.succeess===!1){i.error((e=a==null?void 0:a.data)==null?void 0:e.message);return}u(a.data)}catch(a){i.error(a.message)}finally{l(!1)}},S=async e=>{var a,c;try{const r=n.filter(d=>d._id==e)[0];await x.delete(`api/listing/${e}`,{data:{mainCategoryName:r.mainCategoryName}}),i.success("Listing Deleted Successfully");const E=n.filter(d=>d._id!=e);u(E)}catch(r){i.error(((c=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:c.message)||r.message)}},b=e=>{const a=e==null?void 0:e.mainCategoryName,c=e==null?void 0:e.subCategoryName;a.toLowerCase()=="estate"?f(`/listing/update/${e==null?void 0:e._id},${e==null?void 0:e.mainCategoryName}`):a==k&&c==v&&f(`/cellphone/update/${e==null?void 0:e._id}`)};return o.useEffect(()=>{N()},[]),C?s.jsx(p,{}):n.length===0?s.jsx(o.Suspense,{fallback:s.jsx(p,{}),children:s.jsx(w,{message:"No Listings",description:"You havenâ€™t created any listings yet.",icon:s.jsx(A,{sx:{fontSize:80,color:"grey.500",mb:2}})})}):s.jsxs(s.Fragment,{children:[s.jsxs(B,{maxWidth:"lg",children:[s.jsxs("h2",{style:{color:"green",textAlign:"center"},children:["Your Listings (",n.length,")"]}),s.jsx(D,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},gap:3,p:2,pb:10},children:n.map((e,a)=>s.jsx(F,{item:e,onDeleteClick:()=>{m(!0),y({id:e._id,name:e.name})},onEditClick:()=>b(e),showEdit:!0},a))})]}),s.jsx(I,{open:h,title:"Warning",message:`Are you sure to delete listing (${t==null?void 0:t.name})?`,onClose:j,onConfirm:L,cancelText:"Disagree",confirmText:"Agree"})]})};export{G as default};
