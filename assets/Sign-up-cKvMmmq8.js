function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/GoogleAuth-BDhpn0N_.js","assets/index-B5lp3evd.js","assets/index-DDnostVl.css","assets/firebase-Dc1fJsNB.js","assets/WaveHeader-2ifJBkZW.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as i,_ as P,u as R,w as $,x as G,b as O,y as _,j as e,N as M,T as h,F as y,B as K,I as Q,z as q,a as D,L as W,A as t,c as j,U as v,D as z,E as A,H as E}from"./index-B5lp3evd.js";import{C as J}from"./Container-Buy3LPWA.js";import{T as b}from"./TextField-B_elwkSM.js";import{I as X,V as Y,a as Z}from"./InputAdornment-uKqgwYYo.js";import"./styled-Dql5uali.js";import"./useFormControl-B6FoJptF.js";import"./isMuiElement-Cht4bAAw.js";const ee=i.lazy(()=>P(()=>import("./GoogleAuth-BDhpn0N_.js"),__vite__mapDeps([0,1,2,3]))),N=i.lazy(()=>P(()=>import("./WaveHeader-2ifJBkZW.js"),__vite__mapDeps([4,1,2]))),r=3e3,le=({url:m})=>{const F=R(),l=$(),u=G(),o=O(F.breakpoints.down("md")),V=_(n=>n.persistData.user.userInfo),c=_(n=>n.locationHistory.locationHistory),[C,d]=i.useState(!1),[a,S]=i.useState({username:"",email:"",password:""});i.useState("");const[g,B]=i.useState(!1),U=()=>{B(!g)},x=n=>{S(p=>({...p,[n.target.name]:n.target.value}))},H=async n=>{var p,I,k,w,L,T;if(n.preventDefault(),m==="signup"){if(!a.username||!a.email||!a.password){t.error("Please provide credentials",{autoClose:r});return}try{d(!0);const s=await j.post(v+"api/user/signup",a),f=await j.post(`${v}api/user/signin`,a);localStorage.setItem("accessToken",f.data.accessToken),l(z({...f.data,email:a.email})),t.success("Account created successfully",{autoClose:r}),c?(t.info(`Welcome ${f.data.username}`),l(A(!0)),u(c)):u("/"),S({username:"",email:"",password:""})}catch(s){(I=(p=s==null?void 0:s.response)==null?void 0:p.data)!=null&&I.message?t.error(s.response.data.message,{autoClose:r}):t.error(s.message,{autoClose:r}),console.log(s.message),console.log(s.response.data.message)}finally{d(!1)}}else{if(!a.email||!a.password){t.error("Please provide credentials",{autoClose:r});return}try{d(!0);const s=await j.post(`${v}api/user/signin`,a);localStorage.setItem("accessToken",s.data.accessToken),l(z({...s.data,email:a.email})),c?(t.info(`Welcome ${s.data.username}`),l(A(!0)),u(c)):u("/")}catch(s){(w=(k=s.response)==null?void 0:k.data)!=null&&w.message?(console.log((T=(L=s==null?void 0:s.response)==null?void 0:L.data)==null?void 0:T.message),t.error(s.response.data.message,{autoClose:r}),l(E(s.response.data.message))):(t.error(s.message,{autoClose:r}),l(E(s.message)))}finally{d(!1)}}};return V?e.jsx(M,{to:c||"/"}):e.jsx(e.Fragment,{children:e.jsxs(J,{maxWidth:"md",children:[e.jsx(h,{variant:o?"body1":"h6",children:m==="signup"?e.jsx(i.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(N,{title:"Sign Up"})}):e.jsx(i.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(N,{title:"Sign in"})})}),e.jsxs(K,{component:"div",sx:{mx:"auto",mt:5,width:{xs:"99%",sm:"65%",md:"60%"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",flexWrap:"wrap",gap:2},children:[m==="signup"&&e.jsx(b,{type:"text",fullWidth:!0,size:o?"small":"medium",variant:"outlined",label:"Username",value:a.username,onChange:x,name:"username"}),e.jsx(b,{type:"email",fullWidth:!0,size:o?"small":"medium",variant:"outlined",label:"Email",value:a.email,onChange:x,name:"email"}),e.jsx(b,{type:g?"text":"password",fullWidth:!0,size:o?"small":"medium",variant:"outlined",label:"Password",value:a.password,onChange:x,name:"password",InputProps:{endAdornment:e.jsx(Q,{onClick:U,children:e.jsx(X,{position:"start",children:g?e.jsx(Y,{fontSize:"small"}):e.jsx(Z,{})})})}}),e.jsx(q,{fullWidth:!0,size:o?"small":"medium",variant:"contained",sx:{backgroundColor:D,"&:hover":{opacity:.9,backgroundColor:D}},disabled:C,onClick:H,children:C?"Loading...":m==="signin"?"SIGN IN":"SIGN UP"}),e.jsx(i.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(ee,{isMobile:o})}),m==="signup"?e.jsxs(h,{variant:o?"body2":"h6",children:["Have an account?",e.jsx(W,{to:"/signin",style:{marginLeft:5},className:"Link",children:"Sign in"})]}):e.jsxs(h,{variant:o?"body2":"h6",children:["Don't have an account?",e.jsx(W,{to:"/signup",style:{marginLeft:5},className:"Link",children:"Create one"})]})]})]})})};export{le as default};
