function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/EmptyListings-yhpMfxl3.js","assets/index-DUCvUb60.js","assets/index-DDnostVl.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as o,j as e,_,f as D,e as T,B as i,F as $,a3 as A,T as R,L as S,i as g,H as v,J as E,K as I,M as B,O as U,c as m,U as p,k as l}from"./index-DUCvUb60.js";import{Z as G}from"./Zoom-CO5PsOnk.js";const N=o.forwardRef(function(r,d){return e.jsx(G,{ref:d,...r})}),W=o.lazy(()=>_(()=>import("./EmptyListings-yhpMfxl3.js"),__vite__mapDeps([0,1,2]))),c=3e3,O=()=>{const u=D(s=>s.persistData.user.userInfo),[r,d]=o.useState([]),[n,f]=o.useState({}),j=T(),[y,x]=o.useState(!1),h=()=>{x(!1)},C=async()=>{var s;try{const a=await m.get(`${p}api/listing/${u.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(a.data.succeess===!1){console.log(a.data.message),l.error((s=a==null?void 0:a.data)==null?void 0:s.message,{autoClose:c});return}d(a.data)}catch(a){l.error(a.message,{autoClose:c})}},L=async s=>{var a;try{const t=await m.delete(`${p}api/listing/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(t.data.success==!1){console.log(t.data.message),l.error((a=t==null?void 0:t.data)==null?void 0:a.message,{autoClose:c});return}l.error("Listing Deleted",{autoClose:c}),d(b=>[...b.filter(k=>k._id!==s)])}catch(t){console.log(t.message),l.error(t.message,{autoClose:c})}},w=s=>{j(`/listing/update/${s}`)};return o.useEffect(()=>{C()},[]),e.jsxs(i,{children:[e.jsxs("h2",{style:{color:"green",textAlign:"center"},children:["Your Listings(",r.length,")"]}),e.jsx(i,{sx:{display:"flex",justifyContent:"space-around",flexWrap:"wrap",rowGap:3},children:r.length==0?e.jsx(o.Suspense,{fallback:e.jsx($,{}),children:e.jsx(W,{})}):r.length>0&&r.map((s,a)=>e.jsxs(i,{className:"color",sx:{maxWidth:400,width:400,heigth:400,display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",padding:2,backgroundColor:A,borderRadius:3,gap:1.5,flexWrap:{xs:"wrap",sm:"nowrap"}},children:[e.jsxs(i,{sx:{width:250,height:250},children:[e.jsx(R,{variant:"body1",mb:1,children:s.name}),e.jsx(S,{style:{padding:0,margin:0},to:`/listing/${s._id}`,children:e.jsx("img",{className:"cardImage",srcSet:s.imageURLs[0],alt:s.name,width:"250px",height:"200px",style:{objectPosition:"center",objectFit:"fill",borderRadius:"5px"}})})]}),e.jsxs(i,{sx:{display:"flex",flexDirection:{xs:"row",sm:"column"},columnGap:{xs:2,sm:0},rowGap:{xs:0,sm:2},mt:1},children:[e.jsx(g,{onClick:()=>{x(!0),f({id:s._id,name:s.name})},sx:{color:"red"},type:"button",variant:"contained",className:"color",children:"Delete"}),e.jsx(g,{onClick:()=>{w(s._id)},sx:{color:"green"},color:"primary",type:"button",variant:"contained",className:"color",children:"Edit"})]})]},a))}),e.jsxs(v,{open:y,TransitionComponent:N,keepMounted:!0,onClose:h,children:[e.jsx(E,{children:"Warning"}),e.jsx(I,{children:e.jsx(B,{children:`Are you sure to delete listing (${n==null?void 0:n.name})?`})}),e.jsxs(U,{children:[e.jsx(g,{onClick:h,children:"Disagree"}),e.jsx(g,{onClick:()=>{L(n==null?void 0:n.id),x(!1)},children:"Agree"})]})]})]})};export{O as default};
