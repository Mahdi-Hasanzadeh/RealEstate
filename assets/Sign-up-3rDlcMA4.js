function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/GoogleAuth-BndbpMvu.js","assets/index-BSzDctV0.js","assets/index-DDnostVl.css","assets/firebase-Dc1fJsNB.js","assets/Wave-DhpLX-7P.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as n,_ as E,u as R,d as $,e as G,b as O,f as T,j as e,N as M,T as h,F as y,B as K,g as j,I as Q,h as q,i as J,a as D,L as W,k as t,c as v,U as b,l as N,m as P,n as z}from"./index-BSzDctV0.js";import{C as X}from"./Container-DqNJLyj9.js";import{V as Y,a as Z}from"./VisibilityOff-DPHlg2V6.js";import"./styled-DY2EzqoV.js";const ee=n.lazy(()=>E(()=>import("./GoogleAuth-BndbpMvu.js"),__vite__mapDeps([0,1,2,3]))),A=n.lazy(()=>E(()=>import("./Wave-DhpLX-7P.js"),__vite__mapDeps([4,1,2]))),l=3e3,ie=({url:u})=>{const F=R(),r=$(),m=G(),i=O(F.breakpoints.down("md")),V=T(o=>o.persistData.user.userInfo),c=T(o=>o.locationHistory.locationHistory),[C,d]=n.useState(!1),[a,S]=n.useState({username:"",email:"",password:""});n.useState("");const[g,B]=n.useState(!1),U=()=>{B(!g)},x=o=>{S(p=>({...p,[o.target.name]:o.target.value}))},H=async o=>{var p,k,I,w,L,_;if(o.preventDefault(),u==="signup"){if(!a.username||!a.email||!a.password){t.error("Please provide credentials",{autoClose:l});return}try{d(!0);const s=await v.post(b+"api/user/signup",a),f=await v.post(`${b}api/user/signin`,a);localStorage.setItem("accessToken",f.data.accessToken),r(N({...f.data,email:a.email})),t.success("Account created successfully",{autoClose:l}),c?(t.info(`Welcome ${f.data.username}`),r(P(!0)),m(c)):m("/"),S({username:"",email:"",password:""})}catch(s){(k=(p=s==null?void 0:s.response)==null?void 0:p.data)!=null&&k.message?t.error(s.response.data.message,{autoClose:l}):t.error(s.message,{autoClose:l}),console.log(s.message),console.log(s.response.data.message)}finally{d(!1)}}else{if(!a.email||!a.password){t.error("Please provide credentials",{autoClose:l});return}try{d(!0);const s=await v.post(`${b}api/user/signin`,a);localStorage.setItem("accessToken",s.data.accessToken),r(N({...s.data,email:a.email})),c?(t.info(`Welcome ${s.data.username}`),r(P(!0)),m(c)):m("/")}catch(s){(w=(I=s.response)==null?void 0:I.data)!=null&&w.message?(console.log((_=(L=s==null?void 0:s.response)==null?void 0:L.data)==null?void 0:_.message),t.error(s.response.data.message,{autoClose:l}),r(z(s.response.data.message))):(t.error(s.message,{autoClose:l}),r(z(s.message)))}finally{d(!1)}}};return V?e.jsx(M,{to:c||"/"}):e.jsx(e.Fragment,{children:e.jsxs(X,{maxWidth:"md",children:[e.jsx(h,{variant:i?"body1":"h6",children:u==="signup"?e.jsx(n.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(A,{title:"Sign Up"})}):e.jsx(n.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(A,{title:"Sign in"})})}),e.jsxs(K,{component:"div",sx:{mx:"auto",mt:5,width:{xs:"99%",sm:"65%",md:"60%"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",flexWrap:"wrap",gap:2},children:[u==="signup"&&e.jsx(j,{type:"text",fullWidth:!0,size:i?"small":"medium",variant:"outlined",label:"Username",value:a.username,onChange:x,name:"username"}),e.jsx(j,{type:"email",fullWidth:!0,size:i?"small":"medium",variant:"outlined",label:"Email",value:a.email,onChange:x,name:"email"}),e.jsx(j,{type:g?"text":"password",fullWidth:!0,size:i?"small":"medium",variant:"outlined",label:"Password",value:a.password,onChange:x,name:"password",InputProps:{endAdornment:e.jsx(Q,{onClick:U,children:e.jsx(q,{position:"start",children:g?e.jsx(Y,{fontSize:"small"}):e.jsx(Z,{})})})}}),e.jsx(J,{fullWidth:!0,size:i?"small":"medium",variant:"contained",sx:{backgroundColor:D,"&:hover":{opacity:.9,backgroundColor:D}},disabled:C,onClick:H,children:C?"Loading...":u==="signin"?"SIGN IN":"SIGN UP"}),e.jsx(n.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(ee,{isMobile:i})}),u==="signup"?e.jsxs(h,{variant:i?"body2":"h6",children:["Have an account?",e.jsx(W,{to:"/signin",style:{marginLeft:5},className:"Link",children:"Sign in"})]}):e.jsxs(h,{variant:i?"body2":"h6",children:["Don't have an account?",e.jsx(W,{to:"/signup",style:{marginLeft:5},className:"Link",children:"Create one"})]})]})]})})};export{ie as default};
