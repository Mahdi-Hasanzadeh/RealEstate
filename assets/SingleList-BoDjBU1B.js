function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ContactUser-BoFW8_zQ.js","assets/index-BF8H7DTL.js","assets/index-DDnostVl.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{V as h,j as e,r as d,_ as he,W as xe,X as me,e as ue,d as ve,f as $,u as fe,a as pe,Y as je,B as r,F as Y,i as f,Z as ge,$ as q,T as a,a0 as be,b as ye,c as ke,U as Ce,k as p,a1 as Se}from"./index-BF8H7DTL.js";import{l as Re,S as we,M as Ae,d as K,a as O}from"./index-Bj5IssM0.js";import{L as ze}from"./loader-C4zb0H2B.js";import{C as Q}from"./Container-Dmjk8-GI.js";import{C as Be}from"./Checkbox-Dw2tXpi_.js";import{f as Pe}from"./formatDistanceToNow-aDLjEcHe.js";import"./styled-s5EO9tRq.js";const Ve=h(e.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M9 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0-3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m3 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0-3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m3 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0-3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-8-4c0-2.76 2.24-5 5-5s5 2.24 5 5c0 .55-.45 1-1 1H8c-.55 0-1-.45-1-1"}),"BathroomRounded"),Fe=h([e.jsx("path",{d:"M16.5 12h-9c-.55 0-1 .45-1 1v1h11v-1c0-.55-.45-1-1-1M7.25 8.5h4v2h-4zm5.5 0h4v2h-4z"},"0"),e.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-1.75 15c-.41 0-.75-.34-.75-.75v-.75h-11v.75c0 .41-.34.75-.75.75S5 16.66 5 16.25v-3.08c0-.66.25-1.26.65-1.72V9c0-1.1.9-2 2-2H11c.37 0 .72.12 1 .32.28-.2.63-.32 1-.32h3.35c1.1 0 2 .9 2 2v2.45c.4.46.65 1.06.65 1.72v3.08c0 .41-.34.75-.75.75"},"1")],"BedroomParentRounded"),He=h(e.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark"),Ie=h(e.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"}),"BookmarkBorder"),Le=h([e.jsx("path",{d:"M21 9c-1.1 0-2 .9-2 2v4H5v-4c0-1.1-.9-2-2-2s-2 .9-2 2v5c0 1.65 1.35 3 3 3v1c0 .55.45 1 1 1s1-.45 1-1v-1h12v1c0 .55.45 1 1 1s1-.45 1-1v-1c1.65 0 3-1.35 3-3v-5c0-1.1-.9-2-2-2"},"0"),e.jsx("path",{d:"M7 11v2h10v-2c0-1.86 1.28-3.41 3-3.86V6c0-1.65-1.35-3-3-3H7C5.35 3 4 4.35 4 6v1.14c1.72.45 3 2 3 3.86"},"1")],"ChairRounded"),Me=h(e.jsx("path",{d:"M12.79 3H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2s2-.9 2-2v-4h3c3.57 0 6.42-3.13 5.95-6.79C18.56 5.19 15.84 3 12.79 3m.41 8H10V7h3.2c1.1 0 2 .9 2 2s-.9 2-2 2"}),"LocalParkingRounded"),De=h(e.jsx("path",{d:"M15 11V5.83c0-.53-.21-1.04-.59-1.41L12.7 2.71a.9959.9959 0 0 0-1.41 0l-1.7 1.7C9.21 4.79 9 5.3 9 5.83V7H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6c0-1.1-.9-2-2-2zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"}),"LocationCityRounded"),_e=d.lazy(()=>he(()=>import("./ContactUser-BoFW8_zQ.js"),__vite__mapDeps([0,1,2]))),Te=Re.autoPlay(we),qe=()=>{var B,P,V;const[m,g]=d.useState(0),{listingId:u}=xe(),b=me(),y=ue(),k=ve(),x=$(t=>t.persistData.user.userInfo),s=$(t=>t.userListing),[l,C]=d.useState(null),[X,S]=d.useState(!1),[R,Z]=d.useState(!0),j=fe(),w=pe(j.breakpoints.down("sm")),A=((P=(B=s==null?void 0:s.data)==null?void 0:B.imageURLs)==null?void 0:P.length)||0;d.useEffect(()=>{x&&k(je({listingId:u,currentUserId:x.id}))},[]);const J=async()=>{var t,o,n,v;S(!0);try{if(!(await ke.put(`${Ce}api/user/update/${x.id}`,{favorites:s.data._id,removeFavorites:l?!0:l==!1?!1:!!((t=s==null?void 0:s.data)!=null&&t.favorites.find(c=>c==u))},{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).data)throw new Error("Add to favorites Failed");l==null?((o=s==null?void 0:s.data)!=null&&o.favorites.find(c=>c==u)?p.error("Removed from favorites",{autoClose:2e3}):p.success("Added to favorites",{autoClose:2e3}),C(!((n=s==null?void 0:s.data)!=null&&n.favorites.find(c=>c==u)))):(l?p.error("Removed from favorites",{autoClose:2e3}):p.success("Added to favorites",{autoClose:2e3}),C(!l))}catch(i){p.error(((v=i==null?void 0:i.response)==null?void 0:v.data.message)||i.message,{autoClose:3e3})}finally{S(!1)}},ee=()=>{Z(!1)},se=(t,o)=>t-o,z=t=>{""+b.pathname.split("/").slice(2).join("/"),k(Se(b)),t=="login"?y("/signin"):y("/signup")},te=()=>{g(t=>t+1)},ae=()=>{g(t=>t-1)},re=t=>{g(t)},oe={height:{sm:450,md:500},display:"block",width:"100%",overflow:"hidden",objectFit:{xs:"contain",sm:"fill"},objectPosition:"center"},ne={backgroundColor:"GrayText",width:"50%",mt:3,mb:3},ie=l==!0?!0:l==!1?!1:!!((V=s==null?void 0:s.data)!=null&&V.favorites.find(t=>t==u)),ce=()=>{var t;return e.jsxs(e.Fragment,{children:[e.jsx(ge,{square:!0,elevation:1,sx:{display:"flex",alignItems:"center",height:50,pl:2,bgcolor:q,mt:5},children:e.jsx(a,{children:s.data.name})}),e.jsx(Te,{axis:j.direction==="rtl"?"x-reverse":"x",index:m,onChangeIndex:re,enableMouseEvents:!0,children:(t=s.data)==null?void 0:t.imageURLs.map((o,n)=>e.jsx("div",{children:Math.abs(m-n)<=2?e.jsx(r,{component:"img",sx:oe,src:o,alt:o}):null},n))}),e.jsx(Ae,{style:{background:q,borderRadius:"5px"},steps:A,position:"static",activeStep:m,nextButton:e.jsxs(f,{size:"small",onClick:te,disabled:m===A-1,children:["Next",j.direction==="rtl"?e.jsx(K,{}):e.jsx(O,{})]}),backButton:e.jsxs(f,{size:"small",onClick:ae,disabled:m===0,children:[j.direction==="rtl"?e.jsx(O,{}):e.jsx(K,{}),"Back"]})})]})},de=()=>e.jsxs(r,{padding:2,children:[e.jsx(a,{sx:{textAlign:"center",mb:1.5},variant:"body1",children:"Please first login to your account or create a new one"}),e.jsxs(r,{sx:{display:"flex",justifyContent:"center",columnGap:2},children:[e.jsx(f,{variant:"contained",onClick:()=>{z("login")},size:"small",children:"Login"}),e.jsx(f,{variant:"contained",onClick:()=>{z("signup")},size:"small",children:"Sign up"})]})]}),le=()=>{var t,o,n,v,i,c,F,H,I,L,M,D,_,T,U,W,E,N,G;return e.jsxs(e.Fragment,{children:[e.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",md:"center"},gap:1.5},children:[e.jsxs(a,{variant:"h5",fontWeight:"bold",children:[(t=s.data)==null?void 0:t.name," "]}),e.jsxs(a,{variant:"h5",fontWeight:"bold",children:[((o=s.data)==null?void 0:o.discountPrice)==0?(n=s.data)==null?void 0:n.regularPrice:(v=s.data)==null?void 0:v.discountPrice," ",((i=s.data)==null?void 0:i.type)==="rent"?"/ month":null]})]}),e.jsxs(r,{mt:2,display:"flex",alignItems:"flex-end",gap:1,children:[e.jsx(De,{color:"success",sx:{verticalAlign:"middle"}}),e.jsx(a,{variant:"body1",children:(c=s.data)==null?void 0:c.address})]}),e.jsxs(r,{mt:1.5,mb:1,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{variant:"body1",sx:{backgroundColor:"red",width:"200px",textAlign:"center",color:"white",fontSize:"19px",borderRadius:5},children:((F=s.data)==null?void 0:F.type)=="rent"?"Rent":"Sell"}),((H=s.data)==null?void 0:H.offer)&&e.jsx(a,{variant:"body1",sx:{backgroundColor:"green",width:"200px",textAlign:"center",color:"white",fontSize:"19px",borderRadius:5},children:"AFG "+se((I=s.data)==null?void 0:I.regularPrice,(L=s.data)==null?void 0:L.discountPrice)}),x.id!==s.data.userRef&&e.jsx(be,{title:"Add to Favorites",children:e.jsx(Be,{disabled:X,icon:e.jsx(Ie,{}),checkedIcon:e.jsx(He,{}),checked:ie,onClick:J})})]}),e.jsx(r,{children:e.jsxs(a,{variant:"body1",width:"80%",sx:{wordWrap:"break-word",textAlign:"justify"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:"Description -"}),(M=s.data)==null?void 0:M.description]})}),e.jsx(r,{mt:1,mb:1,children:e.jsxs(a,{variant:"body2",color:ye,children:[((D=s.data)==null?void 0:D.createdAt)&&Pe(new Date((_=s.data)==null?void 0:_.createdAt)),"ago"]})}),e.jsxs(r,{sx:{display:"flex",justifyContent:"flex-start",gap:2,alignItems:"center",flexWrap:"wrap-reverse"},children:[e.jsxs(a,{color:"green",variant:"body1",children:[e.jsx(Fe,{sx:{verticalAlign:"middle"}}),(T=s.data)==null?void 0:T.bedrooms," bed",((U=s.data)==null?void 0:U.bedrooms)!==1&&"s"]}),e.jsxs(a,{color:"green",variant:"body1",children:[e.jsx(Ve,{sx:{verticalAlign:"middle"}}),(W=s.data)==null?void 0:W.bath," bath",((E=s.data)==null?void 0:E.bath)!==1&&"s"]}),e.jsxs(a,{color:"green",variant:"body1",children:[e.jsx(Me,{sx:{verticalAlign:"middle"}}),(N=s.data)!=null&&N.parking?"Parking spot":"No Parking"]}),e.jsxs(a,{color:"green",variant:"body1",children:[e.jsx(Le,{sx:{verticalAlign:"middle"}}),(G=s.data)!=null&&G.furnished?"Furnished":"Unfurnished"]})]})]})};return e.jsx(e.Fragment,{children:x==null?e.jsx(de,{}):s.loading?e.jsx("div",{style:{textAlign:"center"},children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"20%"},children:e.jsx(ze,{})})}):s.success==!1?e.jsx("div",{style:{textAlign:"center"},children:e.jsx("h2",{children:s.error})}):s.success&&s.error==!1&&e.jsxs("main",{children:[e.jsx("div",{children:e.jsx(Q,{maxWidth:"lg",sx:{mt:4},children:e.jsx(ce,{})})}),e.jsxs(Q,{maxWidth:"lg",sx:{pb:5},children:[e.jsx(le,{}),e.jsx(d.Suspense,{fallback:e.jsx(Y,{}),children:!R&&e.jsx(r,{sx:{mt:2.5},children:e.jsx(_e,{userRef:s.data.userRef,name:s.data.name,isSmall:w})})}),e.jsx(d.Suspense,{fallback:e.jsx(Y,{}),children:x.id!==s.data.userRef&&R&&e.jsx(r,{children:e.jsx(f,{onClick:ee,variant:"contained",fullWidth:!0,size:w?"small":"medium",sx:ne,children:"Contact Landlord"})})})]})]})})};export{qe as default};
