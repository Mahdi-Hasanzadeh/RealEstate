function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/GoogleAuth-D-1_Obd8.js","assets/index-CI2nLLvd.js","assets/index-B3EqNP97.css","assets/firebase-Dc1fJsNB.js","assets/PortConfig-CL2sLOPV.js","assets/Wave-BniTa-aC.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as i,_ as E,u as R,c as $,d as G,a as O,e as T,j as e,N as M,T as h,F as y,B as K,f as j,I as Q,g as q,h as J,b as D,L as W,i as t,s as P,k as N,l as z}from"./index-CI2nLLvd.js";import{a as v,U as b}from"./PortConfig-CL2sLOPV.js";import{C as X}from"./Container-Dau7Hifd.js";import{V as Y,a as Z}from"./VisibilityOff-54Yx9CQq.js";import"./styled-CKtFAudq.js";const ee=i.lazy(()=>E(()=>import("./GoogleAuth-D-1_Obd8.js"),__vite__mapDeps([0,1,2,3,4]))),A=i.lazy(()=>E(()=>import("./Wave-BniTa-aC.js"),__vite__mapDeps([5,1,2]))),l=3e3,ne=({url:m})=>{const F=R(),r=$(),u=G(),o=O(F.breakpoints.down("md")),V=T(n=>n.persistData.user.userInfo),c=T(n=>n.locationHistory.locationHistory),[C,d]=i.useState(!1),[a,S]=i.useState({username:"",email:"",password:""});i.useState("");const[g,B]=i.useState(!1),U=()=>{B(!g)},x=n=>{S(p=>({...p,[n.target.name]:n.target.value}))},H=async n=>{var p,k,I,w,L,_;if(n.preventDefault(),m==="signup"){if(!a.username||!a.email||!a.password){t.error("Please provide credentials",{autoClose:l});return}try{d(!0);const s=await v.post(b+"api/user/signup",a),f=await v.post(`${b}api/user/signin`,a);localStorage.setItem("accessToken",f.data.accessToken),r(P({...f.data,email:a.email})),t.success("Account created successfully",{autoClose:l}),c?(t.info(`Welcome ${f.data.username}`),r(N(!0)),u(c)):u("/"),S({username:"",email:"",password:""})}catch(s){(k=(p=s==null?void 0:s.response)==null?void 0:p.data)!=null&&k.message?t.error(s.response.data.message,{autoClose:l}):t.error(s.message,{autoClose:l}),console.log(s.message),console.log(s.response.data.message)}finally{d(!1)}}else{if(!a.email||!a.password){console.log("Please provide credentials"),t.error("Please provide credentials",{autoClose:l});return}try{d(!0);const s=await v.post(`${b}api/user/signin`,a);localStorage.setItem("accessToken",s.data.accessToken),r(P({...s.data,email:a.email})),c?(t.info(`Welcome ${s.data.username}`),r(N(!0)),u(c)):u("/")}catch(s){(w=(I=s.response)==null?void 0:I.data)!=null&&w.message?(console.log((_=(L=s==null?void 0:s.response)==null?void 0:L.data)==null?void 0:_.message),t.error(s.response.data.message,{autoClose:l}),r(z(s.response.data.message))):(t.error(s.message,{autoClose:l}),r(z(s.message)))}finally{d(!1)}}};return V?e.jsx(M,{to:c||"/"}):e.jsx(e.Fragment,{children:e.jsxs(X,{maxWidth:"md",sx:{position:"relative",top:50},children:[e.jsx(h,{variant:o?"body1":"h6",children:m==="signup"?e.jsx(i.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(A,{title:"Sign Up"})}):e.jsx(i.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(A,{title:"Sign in"})})}),e.jsxs(K,{component:"div",sx:{mx:"auto",mt:5,width:{xs:"99%",sm:"65%",md:"60%"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",flexWrap:"wrap",gap:2},children:[m==="signup"&&e.jsx(j,{type:"text",fullWidth:!0,size:o?"small":"medium",variant:"outlined",label:"Username",value:a.username,onChange:x,name:"username"}),e.jsx(j,{type:"email",fullWidth:!0,size:o?"small":"medium",variant:"outlined",label:"Email",value:a.email,onChange:x,name:"email"}),e.jsx(j,{type:g?"text":"password",fullWidth:!0,size:o?"small":"medium",variant:"outlined",label:"Password",value:a.password,onChange:x,name:"password",InputProps:{endAdornment:e.jsx(Q,{onClick:U,children:e.jsx(q,{position:"start",children:g?e.jsx(Y,{fontSize:"small"}):e.jsx(Z,{})})})}}),e.jsx(J,{fullWidth:!0,size:o?"small":"medium",variant:"contained",sx:{backgroundColor:D,"&:hover":{opacity:.9,backgroundColor:D}},disabled:C,onClick:H,children:C?"Loading...":m==="signin"?"SIGN IN":"SIGN UP"}),e.jsx(i.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(ee,{isMobile:o})}),m==="signup"?e.jsxs(h,{variant:o?"body2":"h6",children:["Have an account?",e.jsx(W,{to:"/signin",style:{marginLeft:5},className:"Link",children:"Sign in"})]}):e.jsxs(h,{variant:o?"body2":"h6",children:["Don't have an account?",e.jsx(W,{to:"/signup",style:{marginLeft:5},className:"Link",children:"Create one"})]})]})]})})};export{ne as default};
